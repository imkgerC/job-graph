<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Job graph</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="container">
        <div class="leftbar inside">
            <div>
                <input list="professions" name="professions" type="text" id="searchbar" onkeydown="search_keydown();"/>
                <input type="submit" value="Submit" id="searchbtn" onclick="updateSearch();">
            </div>
            <div>&nbsp;</div>
            <div class="toggle">
                <input type="radio" id="connection-full" name="connection" value="full" onclick="update()" checked>
                <label for="connection-full">Full</label>
                <input type="radio" id="connection-from" name="connection" value="from" onclick="update()">
                <label for="connection-from">From</label>
                <input type="radio" id="connection-to" name="connection" value="to" onclick="update()">
                <label for="connection-to">To</label>
            </div>
        </div> 
        <div class="main inside">
            <object data="svgs/accountant.svg" type="image/svg+xml" id="svg_container"></object>
        </div>
        <datalist id='professions'><option value="academic librarian">academic librarian</option><option value="accountant">accountant</option><option value="actuary">actuary</option><option value="advertising copywriter">advertising copywriter</option><option value="aeronautical engineer">aeronautical engineer</option><option value="agricultural consultant">agricultural consultant</option><option value="aid worker">aid worker</option><option value="air traffic controller">air traffic controller</option><option value="airline cabin crew">airline cabin crew</option><option value="analytical chemist">analytical chemist</option><option value="animator">animator</option><option value="archaeologist">archaeologist</option><option value="architect">architect</option><option value="archivist">archivist</option><option value="armed forces officer">armed forces officer</option><option value="aromatherapist">aromatherapist</option><option value="auditor">auditor</option><option value="automotive engineer">automotive engineer</option><option value="barrister">barrister</option><option value="barristers clerk">barristers clerk</option><option value="biomedical scientist">biomedical scientist</option><option value="biotechnologist">biotechnologist</option><option value="brand manager">brand manager</option><option value="broadcasting presenter">broadcasting presenter</option><option value="building surveyor">building surveyor</option><option value="camera operator">camera operator</option><option value="careers adviser">careers adviser</option><option value="cartographer">cartographer</option><option value="catering manager">catering manager</option><option value="charities administrator">charities administrator</option><option value="chemical engineer">chemical engineer</option><option value="child psychotherapist">child psychotherapist</option><option value="chiropractor">chiropractor</option><option value="civil engineer">civil engineer</option><option value="civil service administrator">civil service administrator</option><option value="clinical biochemist">clinical biochemist</option><option value="clinical microbiologist">clinical microbiologist</option><option value="clinical research associate">clinical research associate</option><option value="clothing and textile technologist">clothing and textile technologist</option><option value="commercial horticulturist">commercial horticulturist</option><option value="commissioning editor">commissioning editor</option><option value="commodity broker">commodity broker</option><option value="community education officer">community education officer</option><option value="community worker">community worker</option><option value="computer sales support">computer sales support</option><option value="conference organiser">conference organiser</option><option value="content manager">content manager</option><option value="control and instrumentation engineer">control and instrumentation engineer</option><option value="corporate banker">corporate banker</option><option value="corporate treasurer">corporate treasurer</option><option value="counsellor">counsellor</option><option value="courier">courier</option><option value="crystallographer">crystallographer</option><option value="curator">curator</option><option value="customs officer">customs officer</option><option value="data scientist">data scientist</option><option value="database administrator">database administrator</option><option value="debt adviser">debt adviser</option><option value="dentist">dentist</option><option value="dietitian">dietitian</option><option value="diplomatic service">diplomatic service</option><option value="doctor">doctor</option><option value="economist">economist</option><option value="education administrator">education administrator</option><option value="electrical engineer">electrical engineer</option><option value="engineering geologist">engineering geologist</option><option value="environmental health officer">environmental health officer</option><option value="environmental manager">environmental manager</option><option value="environmental scientist">environmental scientist</option><option value="equality and diversity officer">equality and diversity officer</option><option value="ergonomist">ergonomist</option><option value="exploration geologist">exploration geologist</option><option value="facilities manager">facilities manager</option><option value="financial manager">financial manager</option><option value="firefighter">firefighter</option><option value="fisheries officer">fisheries officer</option><option value="fitness centre manager">fitness centre manager</option><option value="food scientist">food scientist</option><option value="forensic scientist">forensic scientist</option><option value="geneticist">geneticist</option><option value="geographical information systems manager">geographical information systems manager</option><option value="government research officer">government research officer</option><option value="graphic designer">graphic designer</option><option value="health and safety adviser">health and safety adviser</option><option value="health and safety inspector">health and safety inspector</option><option value="herbalist">herbalist</option><option value="heritage manager">heritage manager</option><option value="hotel manager">hotel manager</option><option value="housing adviser">housing adviser</option><option value="human resources officer">human resources officer</option><option value="hydrologist">hydrologist</option><option value="illustrator">illustrator</option><option value="immigration officer">immigration officer</option><option value="immunologist">immunologist</option><option value="industrial designer">industrial designer</option><option value="insurance broker">insurance broker</option><option value="insurance claims inspector">insurance claims inspector</option><option value="investment analyst">investment analyst</option><option value="investment banker">investment banker</option><option value="investment fund manager">investment fund manager</option><option value="it consultant">it consultant</option><option value="journalist">journalist</option><option value="laboratory technician">laboratory technician</option><option value="landscape architect">landscape architect</option><option value="lawyer">lawyer</option><option value="lecturer">lecturer</option><option value="legal executive">legal executive</option><option value="leisure centre manager">leisure centre manager</option><option value="librarian">librarian</option><option value="local government administrator">local government administrator</option><option value="logistics manager">logistics manager</option><option value="manufacturing engineer">manufacturing engineer</option><option value="manufacturing machine operator">manufacturing machine operator</option><option value="market research analyst">market research analyst</option><option value="marketing assistant">marketing assistant</option><option value="marketing executive">marketing executive</option><option value="materials specialist">materials specialist</option><option value="mechanical engineer">mechanical engineer</option><option value="media planner">media planner</option><option value="medical physicist">medical physicist</option><option value="metallurgist">metallurgist</option><option value="meteorologist">meteorologist</option><option value="microbiologist">microbiologist</option><option value="midwife">midwife</option><option value="mining engineer">mining engineer</option><option value="museum education officer">museum education officer</option><option value="museum exhibition officer">museum exhibition officer</option><option value="nanoscientist">nanoscientist</option><option value="nature conservation officer">nature conservation officer</option><option value="network administrator">network administrator</option><option value="nurse">nurse</option><option value="occupational therapist">occupational therapist</option><option value="oceanographer">oceanographer</option><option value="office manager">office manager</option><option value="operational researcher">operational researcher</option><option value="outdoor pursuits manager">outdoor pursuits manager</option><option value="packaging technologist">packaging technologist</option><option value="paramedic">paramedic</option><option value="patent attorney">patent attorney</option><option value="personal assistant">personal assistant</option><option value="pharmacist">pharmacist</option><option value="pharmacovigilance officer">pharmacovigilance officer</option><option value="photographer">photographer</option><option value="physiotherapist">physiotherapist</option><option value="planning technician">planning technician</option><option value="police officer">police officer</option><option value="political party agent">political party agent</option><option value="press photographer">press photographer</option><option value="press editor">press editor</option><option value="prison officer">prison officer</option><option value="private music teacher">private music teacher</option><option value="probation officer">probation officer</option><option value="product development scientist">product development scientist</option><option value="production manager">production manager</option><option value="programme researcher">programme researcher</option><option value="project manager">project manager</option><option value="psychologist">psychologist</option><option value="psychotherapist">psychotherapist</option><option value="public affairs consultant">public affairs consultant</option><option value="public house manager">public house manager</option><option value="pr officer">pr officer</option><option value="qa analyst">qa analyst</option><option value="quality assurance manager">quality assurance manager</option><option value="records manager">records manager</option><option value="regulatory affairs officer">regulatory affairs officer</option><option value="research scientist">research scientist</option><option value="restaurant manager">restaurant manager</option><option value="retail banker">retail banker</option><option value="retail buyer">retail buyer</option><option value="retail manager">retail manager</option><option value="retail merchandiser">retail merchandiser</option><option value="retail pharmacist">retail pharmacist</option><option value="sales executive">sales executive</option><option value="sales manager">sales manager</option><option value="scene of crime officer">scene of crime officer</option><option value="secretary">secretary</option><option value="set designer">set designer</option><option value="site manager">site manager</option><option value="social researcher">social researcher</option><option value="social worker">social worker</option><option value="software architect">software architect</option><option value="software developer">software developer</option><option value="solicitor">solicitor</option><option value="speech and language therapist">speech and language therapist</option><option value="sports coach">sports coach</option><option value="sports development officer">sports development officer</option><option value="sports therapist">sports therapist</option><option value="statistician">statistician</option><option value="stockbroker">stockbroker</option><option value="structural engineer">structural engineer</option><option value="systems analyst">systems analyst</option><option value="systems developer">systems developer</option><option value="tax inspector">tax inspector</option><option value="teacher">teacher</option><option value="teaching assistant">teaching assistant</option><option value="technical author">technical author</option><option value="television production assistant">television production assistant</option><option value="tour operator">tour operator</option><option value="tourism officer">tourism officer</option><option value="tourist information manager">tourist information manager</option><option value="town and country planner">town and country planner</option><option value="toxicologist">toxicologist</option><option value="trade union research officer">trade union research officer</option><option value="trader">trader</option><option value="trading standards officer">trading standards officer</option><option value="training and development officer">training and development officer</option><option value="translator">translator</option><option value="transportation planner">transportation planner</option><option value="travel agent">travel agent</option><option value="ux designer">ux designer</option><option value="veterinary surgeon">veterinary surgeon</option><option value="video game designer">video game designer</option><option value="warehouse manager">warehouse manager</option><option value="water officer">water officer</option><option value="web designer">web designer</option><option value="welfare rights adviser">welfare rights adviser</option><option value="writer">writer</option><option value="youth worker">youth worker</option></datalist>
    </div>
    <script>
        document.getElementById('searchbar').addEventListener('input', search_input);

        function search_keydown() {
            if (event.key == 'Enter') {
                updateSearch();
            }
        }

        function search_input(e) {
            console.log("handler");
            var input = e.target,
                val = input.value;
                list = input.getAttribute('list'),
                options = document.getElementById(list).childNodes;

            for(var i = 0; i < options.length; i++) {
                if(options[i].innerText === val) {
                    updateSearch();
                    break;
                }
            }
        }

        function updateSearch() {
            let value = document.getElementById("searchbar").value.trim();
            let prefix = "";
            if (document.getElementById("connection-from").checked) {
                prefix = "from_";
            }
            if (document.getElementById("connection-to").checked) {
                prefix = "to_";
            }

            setSvg(prefix, value);
        }

        function update() {
            let profession = document.getElementById('svg_container').contentDocument.getElementById("graph0").childNodes[1].textContent;
            let value = profession.replaceAll("_", " ")
            
            let prefix = "";
            if (document.getElementById("connection-from").checked) {
                prefix = "from_";
            }
            if (document.getElementById("connection-to").checked) {
                prefix = "to_";
            }

            setSvg(prefix, value);
        }

        function setSvg(prefix, value) {
            document.getElementById('svg_container').setAttribute("data", "svgs/" + prefix + value + ".svg");
            let element = document.getElementById("svg_container");
            let cloneElement = element.cloneNode(true);
            element.parentNode.replaceChild(cloneElement, element); 
        }
    </script>
</body>
</html>